<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>How to define a permutation design? — how • permute</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="How to define a permutation design? — how" />
<meta property="og:description" content="Utility functions to describe unrestricted and restricted permutation
  designs for time series, line transects, spatial grids and blocking
  factors." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">permute</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9-6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/permutations.html">Restricted permutations; using the permute package</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/gavinsimpson/permute/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>How to define a permutation design?</h1>
    
    <div class="hidden name"><code>how.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Utility functions to describe unrestricted and restricted permutation
  designs for time series, line transects, spatial grids and blocking
  factors.</p>
    </div>

    <pre class="usage"><span class='fu'>how</span><span class='op'>(</span>within <span class='op'>=</span> <span class='fu'>Within</span><span class='op'>(</span><span class='op'>)</span>, plots <span class='op'>=</span> <span class='fu'>Plots</span><span class='op'>(</span><span class='op'>)</span>, blocks <span class='op'>=</span> <span class='cn'>NULL</span>,
    nperm <span class='op'>=</span> <span class='fl'>199</span>, complete <span class='op'>=</span> <span class='cn'>FALSE</span>, maxperm <span class='op'>=</span> <span class='fl'>9999</span>,
    minperm <span class='op'>=</span> <span class='fl'>5040</span>, all.perms <span class='op'>=</span> <span class='cn'>NULL</span>, make <span class='op'>=</span> <span class='cn'>TRUE</span>,
    observed <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='fu'>Within</span><span class='op'>(</span>type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"free"</span>,<span class='st'>"series"</span>,<span class='st'>"grid"</span>,<span class='st'>"none"</span><span class='op'>)</span>,
       constant <span class='op'>=</span> <span class='cn'>FALSE</span>, mirror <span class='op'>=</span> <span class='cn'>FALSE</span>,
       ncol <span class='op'>=</span> <span class='cn'>NULL</span>, nrow <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>Plots</span><span class='op'>(</span>strata <span class='op'>=</span> <span class='cn'>NULL</span>, type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"none"</span>,<span class='st'>"free"</span>,<span class='st'>"series"</span>,<span class='st'>"grid"</span><span class='op'>)</span>,
      mirror <span class='op'>=</span> <span class='cn'>FALSE</span>, ncol <span class='op'>=</span> <span class='cn'>NULL</span>, nrow <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>within, plots, blocks</th>
      <td><p>Permutation designs for samples within the
    levels of <code>plots</code> (<code>within</code>), permutation of <code>plots</code>
    themselves, or for the definition of blocking structures which
    further restrict permutations (<code>blocks</code>). <code>within</code> and
    <code>plots</code> each require a named list as produced by <code>Within</code>
    and <code>Plots</code> respectively. <code>blocks</code> takes a factor (or an
    object coercible to a factor via <code>as.factor</code>), the levels of
    which define the blocking structure.</p></td>
    </tr>
    <tr>
      <th>nperm</th>
      <td><p>numeric; the number of permutations.</p></td>
    </tr>
    <tr>
      <th>complete</th>
      <td><p>logical; should complete enumeration of all
    permutations be performed?</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>character; the type of permutations required. One of
    <code>"free"</code>, <code>"series"</code>, <code>"grid"</code> or <code>"none"</code>. See
    Details.</p></td>
    </tr>
    <tr>
      <th>maxperm</th>
      <td><p>numeric; the maximum number of permutations to
    perform. Currently unused.</p></td>
    </tr>
    <tr>
      <th>minperm</th>
      <td><p>numeric; the lower limit to the number of possible
    permutations at which complete enumeration is performed. When
    <code>nperm</code> is lower than <code>minperm</code>, sampling is performed
    from the set of complete permutations to avoid duplicate
    permutations. See argument <code>complete</code> and Details, below.</p></td>
    </tr>
    <tr>
      <th>all.perms</th>
      <td><p>an object of class <code>allPerms</code>, the result of a
    call to <code><a href='allPerms.html'>allPerms</a></code>.</p></td>
    </tr>
    <tr>
      <th>make</th>
      <td><p>logical; should <code>check</code> generate all possible
    permutations? Useful if want to check permutation design but not
    produce the matrix of all permutations, or to circumvent the
    heuristics governing when complete enumeration is activated.</p></td>
    </tr>
    <tr>
      <th>observed</th>
      <td><p>logical; should the observed permutation be returned
    as part of the set of all permutations? Default is <code>FALSE</code> to
    facilitate usage in higher level functions.</p></td>
    </tr>
    <tr>
      <th>constant</th>
      <td><p>logical; should the same permutation be used within
    each level of strata? If <code>FALSE</code> a separate, possibly restricted,
    permutation is produced for each level of <code>strata</code>.</p></td>
    </tr>
    <tr>
      <th>mirror</th>
      <td><p>logical; should mirroring of sequences be allowed?</p></td>
    </tr>
    <tr>
      <th>ncol, nrow</th>
      <td><p>numeric; the number of columns and rows of samples
    in the spatial grid respectively.</p></td>
    </tr>
    <tr>
      <th>strata</th>
      <td><p>A factor, or an object that can be coerced to a factor
    via <code>as.factor</code>, specifying the strata for permutation.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>shuffle</code> can generate permutations for a wide range of
  restricted permutation schemes. A small selection of the available
  combinations of options is provided in the Examples section below.</p>
<p>Argument type controls how samples are actually permuted;
  <code>"free"</code> indicates randomization, <code>"series"</code> indicates
  permutation via cyclic shifts (suitable for evenly-spaced line
  transect or time series data), <code>"grid"</code> indicates permutation via
  toroidal shifts (suitable for samples on a regular grid), and
  <code>"none"</code> indicates no permutation of samples. See the package
  vignette (<code>browseVignettes("permute")</code>) for additional
  information on each of these types of permutation.</p>
<p>Argument <code>mirror</code> determines whether grid or series permutations
  can be mirrored. Consider the sequence 1,2,3,4. The relationship
  between consecutive observations is preserved if we reverse the
  sequence to 4,3,2,1. If there is no inherent direction in your
  experimental design, mirrored permutations can be considered
  part of the Null model, and as such increase the number of possible
  permutations. The default is to not use mirroring so you must
  explicitly turn this on using <code>mirror = TRUE</code> in <code>how</code>.</p>
<p>To permute plots rather than the observations within plots (the
  levels of <code>strata</code>), use <code>Within(type = "none")</code> and
  <code>Plots(type = foo)</code>, where <code>foo</code> is how you want the plots
  to be permuted. However, note that the number of observations within
  each plot <strong>must</strong> be equal!</p>
<p>For some experiments, such as BACI designs, one might wish to use the
  same permutation within each plot. This is controlled by
  argument <code>constant</code>. If <code>constant = TRUE</code> then the same
  permutation will be generated for each level of <code>strata</code>. The
  default is <code>constant = FALSE</code>.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>For <code>how</code> a list with components for each of the possible arguments.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><code><a href='shuffle.html'>shuffle()</a></code> is modelled after the permutation schemes of Canoco
  3.1 (ter Braak, 1990); see also Besag &amp; Clifford (1989).</p>
<p>Besag, J. and Clifford, P. (1989) Generalized Monte Carlo significance
  tests. <em>Biometrika</em> <strong>76</strong>; 633--642.</p>
<p>ter Braak, C. J. F. (1990). <em>Update notes: CANOCO version
    3.1</em>. Wageningen: Agricultural Mathematics Group. (UR).</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Gavin Simpson</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='shuffle.html'>shuffle</a></code> and <code><a href='shuffleSet.html'>shuffleSet</a></code> for
  permuting from a design, and <code><a href='check.html'>check</a></code>, a utility function
  for checking permutation design described by <code>how</code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='co'>## Set up factors for the Plots and Blocks</span></span>
<span class='r-in'><span class='va'>plts</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/gl.html'>gl</a></span><span class='op'>(</span><span class='fl'>4</span>, <span class='fl'>10</span><span class='op'>)</span> <span class='co'>## 4 Plots of 10 samples each</span></span>
<span class='r-in'><span class='va'>blks</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/gl.html'>gl</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>20</span><span class='op'>)</span> <span class='co'>## 2 Blocks of 20 samples each</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## permutation design</span></span>
<span class='r-in'><span class='va'>h1</span> <span class='op'>&lt;-</span> <span class='fu'>how</span><span class='op'>(</span>within <span class='op'>=</span> <span class='fu'>Within</span><span class='op'>(</span>type <span class='op'>=</span> <span class='st'>"series"</span>, mirror <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,</span>
<span class='r-in'>          plots <span class='op'>=</span> <span class='fu'>Plots</span><span class='op'>(</span>strata <span class='op'>=</span> <span class='va'>plts</span>, type <span class='op'>=</span> <span class='st'>"series"</span><span class='op'>)</span>,</span>
<span class='r-in'>          blocks <span class='op'>=</span> <span class='va'>blks</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## The design can be updated...</span></span>
<span class='r-in'><span class='co'>## ... remove the blocking:</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/stats/update.html'>update</a></span><span class='op'>(</span><span class='va'>h1</span>, blocks <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Permutation Design:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Blocks:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Defined by: none</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Plots:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Plots: plts</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Permutation type: series</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Mirrored?: No</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Within Plots:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Permutation type: series</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Mirrored?: Yes</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Different permutation within each Plot?: Yes</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Permutation details:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Number of permutations: 199</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Max. number of permutations allowed: 9999</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Evaluate all permutations?: No.  Activation limit: 5040</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## ... or switch the type of shuffling at a level:</span></span>
<span class='r-in'><span class='co'>#update(h1, plots = update(getPlots(h1), type = "none"))</span></span>
<span class='r-in'><span class='va'>plots2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/update.html'>update</a></span><span class='op'>(</span><span class='fu'><a href='get-methods.html'>getPlots</a></span><span class='op'>(</span><span class='va'>h1</span><span class='op'>)</span>, type <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/stats/update.html'>update</a></span><span class='op'>(</span><span class='va'>h1</span>, plots <span class='op'>=</span> <span class='va'>plots2</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Permutation Design:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Blocks:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Blocks: blks</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Plots:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Plots: plts</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Permutation type: none</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Mirrored?: No</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Within Plots:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Permutation type: series</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Mirrored?: Yes</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Different permutation within each Plot?: Yes</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Permutation details:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Number of permutations: 199</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Max. number of permutations allowed: 9999</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   Evaluate all permutations?: No.  Activation limit: 5040</span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Gavin L. Simpson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


